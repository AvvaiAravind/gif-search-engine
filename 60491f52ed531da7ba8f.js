import"./style.css";const searchBtn=document.querySelector("button");function searchFunc(){const e=document.querySelector("input").value.trim(),t=document.createElement("img"),n=document.querySelector("figcaption");setMultipleAttribute(t,{width:500,height:400});let r="https://api.giphy.com/v1/gifs/search?api_key=5HYMfAaVa6O12VZ6di8nQx7Fj1fKqZVn&limit=1&q=";r=r.concat(e),fetch(r).then((e=>{if(!e.ok)throw new Error(`There was an issue with your request ${e.status}. Please try again.`);return e.json()})).then((e=>{if(0===e.data.length)throw new Error("No GIFs found for the entered search term. Please try something else.");console.log(e.data[0].images),console.log(e.meta),t.src=e.data[0].images.original.url,t.title=e.data[0].alt_text,n.textContent=e.data[0].title,t.alt=e.data[0].title,searchBtn.removeAttribute("disabled"),document.querySelector("input").value=""})).catch((e=>{alert(e),searchBtn.removeAttribute("disabled"),document.querySelector("input").value="",n.textContent=""})),appendElement(".image-section",t)}function appendElement(e,t){const n=document.querySelector(e);if(!n)return console.warn(`Parent element ${e} not found`),null;n.append(t)}function setMultipleAttribute(e,t){for(let n in t)e.setAttribute(n,t[n])}searchBtn.addEventListener("click",(e=>{e.preventDefault();const t=document.querySelector("figure"),n=document.querySelector("form");n.checkValidity()?(console.log(t.firstElementChild.firstElementChild),t.firstElementChild.firstElementChild&&t.firstElementChild.firstElementChild.remove(),searchFunc(),searchBtn.setAttribute("disabled","")):n.reportValidity()})),document.addEventListener("keydown",(e=>{"Enter"===e.key&&(e.preventDefault(),searchBtn.click())}));